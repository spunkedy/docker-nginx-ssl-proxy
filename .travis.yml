sudo: required
services:
- docker
script:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export COMMIT="latest"
- export REPO=spunkedy/docker-nginx-ssl-proxy
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH
  ; fi`
- echo "repo ${REPO}"
- echo "commit ${COMMIT}"
- echo "tag ${TAG}"
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
env:
  global:
  - secure: XLcw1NRVuhhQBNcBYtf5zEc6k1y6AU/M06IGMzeFxyaODV9y52a43XxvEELooI2s9QOLOPC7s/RCoxIuolQ/EtXem7HMY56uEAebnFfVFLayyryq/zExtRatjvCvdWgFFYPvnITqhkfWT6a8LaB6kYWULUOxGDi1s9T8o+KwRI8KapNOufCc7zCM4UXjppLwyFt3803CpALg3h5XMR9OYQuPSMiIcD/milACIN3/REACChWW6ZmuFdNiC7LETs5ofwuhSrz7EURqgJ5c6HnDeXbWKoJbrOl3gWk3yciQ3yqrF37a+M8un9cISrwP2NVJDPbWcPjm4ResOB5oXi+T++NcAmOVdIRcbSFylvAvDr29TSjghzIdK1jW3yUo/C3+WyvQCF4c+TjyRc1ZyJn+QI2ttp41iWojub6rn20XtnOkBtrcDhRTePj1/ZGg9g/RzEfK7LjkW7E2g5Nu71EWbJaLwt67P6f9c7IE8+ncmZs4Tld1ZjVsj5NPwJG3ZsiBCaSADFV6BgVQ0Qd0fdkjYUrRiQoH/2zJm2Q6E50REUsWwBjOWhpUUZKrc3cG4Ae8slH7+n0WzX87yKT2TCY4+BygbYyg2lLHpfFsYTFTPh0Upg8oaVCrdO7vtXm/ZGZqwLgg1QG6ArED0J7cL1XQ/CkCAUeSKjukoty4M57/3jQ=
  - secure: DonZaKW41pik08NNAdtjsMNmck8x0vvF1JVxZCd5lypXengzz9BbHc/FkvO/gHnOI/WhhibWmYR0i/TwVm7yrt0pALQL0jaBhpTnUzPL/fjIbCoLIt5HtEr63t8qwFQ+csQPvFZcYn3PML1lpR06Q3C4YS2MldmZGMWJc5sIk2yh71cJVFbi4eXY2RhuiLmuSWG2pQYTjC2wTD9J8X/rkZxESbQd6WsnkM04HAfJmpVefTTZKLKq8TTkBB4SBPHsA3TsjGE4X/VwEpr96c21vRaXX8lL8JNZxIkW2A+jlk1YanUelub+kZDJRMOCK+dsPAmWQjnpUIdStnq5jPPXcOTz1moWDjANQyO3vxRvcJKQtk+rybzS+eA4u1S8qXUpOS8Oi2fPo4IDnSaPEUy3DvzK3TQBpVaI4OGWhotlHNNm6mrBkBGqeDtqsiNRew77gpl4rfso+L7GaTUspmYBxvd/QDsUCqfmUzwgno5bFTwD+o4YagQ26t59pQCrqKeVAH/Mr4uR3oF4+H2Nmk4tQjuA+hMq8XRUrAs8ip2EfVD/kK4wqcD2xobT4MqbkBdU/xAQhNrmvcmAnm5CPlslm9mDRsWts2G3lv3yVKs49uos3j6v9qQQrhf29w/qjy2Y+icQG/mAmqmkgxL1yESz2qvRg+6gwQrf3CkHwVXmnp4=
  - secure: mCS0IdVK6OChKxwb3KfxHsPs25J0juyXBcXsxedbBPI582yFsTd1luXbe0cta8Om4fnIJgMsmxDPA1USumEuN/ooSyxzT3EKTlQAp+UmRlAn0kVYp/GAxRmlho3i/zQ3H+fFBYm353DLVpZwUfUvv/9Sx/SjMaVNhUSKq2fTIPWqT65jBUdTVukklCNx/s54reLkXbWI88pvr5+KzVpLsDVt5c/pvFUV/LACEkJWwlF5Rs1Kt8ZOETp6wCNuIdg1bPlTsvqVvZAxgeJ7yAcNB1M0r1mxMVKURA/xLNHZeGrHcagfd+yxa4pPnw5XXO7SgX/6d2CYxrq0wCdhorw9yvYl3fdlJX6qevmE9OqDGdKjhFzxN/5T6/zuOjT4g61cSpH8dymd8Zq4bmrOCOi1zSB9AxAihfIx8n0qpzsmcHSTwMCvWMrDA9QucJ6kL1CM0Z7gPYJv1aqcicNFpmzVelstHoz6/km+q7K04O33ghpxlHz1MCOZ1DPH8QHEIu7+DeSI4R3mvvtV2nqdAABkKOE0nTt/SUzLQlpo12M4oIWqsB2t7TGAJE1a3HoPZ+XFTb4xVzK0zNtWa12ppDZsK2qvsUne/SMU8ccfquil0Z00skxJwOFoRtNf81/mhWu1ZKpfmNfwjbsuvPmtdlRJnME2NJM/HQm89m9f8sWLN3o=
